 240 - # Save this as `test_gemini_model.py`                                                                       ││ 241 - from gemini_model_client import GeminiModel # Assuming the class is in gemini_model_client.py               ││  95 + # Part of our get_rag_answer logic                                                                          ││  96 + retrieved_chunks = qdrant_client.search(...) # Search Qdrant                                                ││  97                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 243 - def simple_parser(text: str) -> str:                                                                        ││ 244 -     """A simple parser that just returns the text."""                                                       ││ 245 -     return f"Parsed: {text}"                                                                                ││  98 + context = "\n".join(chunk.text for chunk in retrieved_chunks)                                               ││  99                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 247 - if __name__ == "__main__":                                                                                  ││ 248 -     # Initialize the model                                                                                  ││ 249 -     gemini_client = GeminiModel(model_name="gemini-pro", temperature=0.0) # Using gemini-pro for general    ││     purpose                                                                                                       ││ 100 + prompt = f"""                                                                                               ││ 101 + You are a helpful assistant. A user has asked a question.                                                   ││ 102 + Using ONLY the following text, please answer the user's question.                                           ││ 103 + Do not use any of your own knowledge. If the answer is not present in the text,                             ││ 104 + respond with "I could not find an answer in the provided text."                                             ││ 105                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 251 -     # Test single call                                                                                      ││ 252 -     print("\n--- Testing Single Call ---")                                                                  ││ 253 -     single_prompt = "What is the capital of France?"                                                        ││ 254 -     try:                                                                                                    ││ 255 -         response = gemini_client.call(single_prompt)                                                        ││ 256 -         print(f"Prompt: {single_prompt}\nResponse: {response}")                                             ││ 257 -     except Exception as e:                                                                                  ││ 258 -         print(f"Single call failed: {e}")                                                                   ││ 106 + ---                                                                                                         ││ 107 + TEXT:                                                                                                       ││ 108 + {context}                                                                                                   ││ 109 + ---                                                                                                         ││ 110                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 260 -     # Test single call with parser                                                                          ││ 261 -     print("\n--- Testing Single Call with Parser ---")                                                      ││ 262 -     single_prompt_parser = "Tell me a short story about a space cat."                                       ││ 263 -     try:                                                                                                    ││ 264 -         response_parsed = gemini_client.call(single_prompt_parser, parser_func=simple_parser)               ││ 265 -         print(f"Prompt: {single_prompt_parser}\nResponse (parsed): {response_parsed}")                      ││ 266 -     except Exception as e:                                                                                  ││ 267 -         print(f"Single call with parser failed: {e}")                                                       ││ 111 + QUESTION:                                                                                                   ││ 112 + {user_question}                                                                                             ││ 113 + """                                                                                                         ││ 114                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 269 -     # Test parallel calls                                                                                   ││ 270 -     print("\n--- Testing Parallel Calls ---")                                                               ││ 271 -     parallel_prompts = [                                                                                    ││ 272 -         "What is 2+2?",                                                                                     ││ 273 -         "Who wrote 'Romeo and Juliet'?",                                                                    ││ 274 -         "What is the largest ocean on Earth?"                                                               ││ 275 -     ]                                                                                                       ││ 276 -     try:                                                                                                    ││ 277 -         responses_parallel = gemini_client.call_parallel(parallel_prompts)                                  ││ 278 -         for i, (prompt, res) in enumerate(zip(parallel_prompts, responses_parallel)):                       ││ 279 -             print(f"Parallel Prompt {i+1}: {prompt}\nResponse: {res}")                                      ││ 280 -     except Exception as e:                                                                                  ││ 281 -         print(f"Parallel calls failed: {e}")                                                                ││ 115 + answer = gemini_model.call(prompt=prompt)                                                                   ││ 116   ```                                                                                                         ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 283 - :::note                                                                                                     ││ 284 - For this test script to work, you would typically save the `GeminiModel` class in a separate file (e.g.,    ││     `gemini_model_client.py`) and then import it as shown in the example. This promotes better code organization. ││ 285 - :::                                                                                                         ││ 117                                                                                                               ││ 118 + This technique forces the model to act as a pure question-answering system based on the context we provide, ││     making our RAG chatbot more reliable and trustworthy.                                                         ││ 119 +                                                                                                             ││ 120   ## What's Next?                                                                                             ││ 121                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 289 - You've successfully implemented a complex AI client based on a clear specification! This demonstrates the   ││     power of the spec-first approach: a well-defined spec makes the implementation phase straightforward and      ││     focused.                                                                                                      ││ 122 + We've now designed the architecture for our RAG chatbot. We understand the role of each component and have  ││     a strategy for ensuring our answers are grounded in our source documents.                                     ││ 123                                                                                                               ││ ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════ ││ 291 - In the next chapter, we'll begin to integrate this `GeminiModel` client into a larger application,          ││     specifically, our AI-powered textbook's RAG system.                                                           ││ 292 -                                                                                                             ││ 293 - ```                                                                                                         ││ 124 + In the next chapter, we'll dive into the implementation details. We'll set up our project, write the code   ││     to chunk and embed our documents, and build the FastAPI application that ties everything together.